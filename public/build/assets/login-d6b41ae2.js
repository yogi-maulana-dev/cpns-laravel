import{t as s}from"./toast-f4a8d6c7.js";const d=(e,a={})=>new Promise(async(o,r)=>{let t,n;try{t=await fetch(e,{...a,headers:{...a.headers,"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}),a.blob?n=await t.blob():n=await t.json(),o({res:t,data:n})}catch(c){r({res:t,data:n,error:c})}}),u=e=>Object.getOwnPropertyNames(e).map(o=>`<li class="d-block">${e[o][0]}</li>`).join(""),i=(e,a=!0)=>{if(a){const r=e.textContent;return e.innerHTML=`<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span><span id="initial-text">${r}</span>`,e.setAttribute("disabled",!0)}const o=e.querySelector("#initial-text").textContent;return e.innerHTML=o,e.removeAttribute("disabled")},l=document.getElementById("login-form");l.addEventListener("submit",async function(e){e.preventDefault();const a=this.querySelector("#login-form-button"),o=new FormData(this);try{i(a,!0);let{res:r,data:t}=await d(this.action,{method:"POST",body:o});if(r.status==422){const n=u(t.errors);s.show({title:"Error",body:n,colorClass:s.TOAST_DANGER})}r.status==400&&s.show({title:"Informasi",body:`<span>${t.message}</span>`,colorClass:s.TOAST_DANGER}),r.status==200&&(s.show({title:"Informasi",body:`<span>${t.message}</span>`,colorClass:s.TOAST_SUCCESS}),window.location.assign(t.redirect_to))}catch({error:r,res:t,data:n}){t.status==429&&s.show({title:"Terlalu Banyak Request Login",body:`<span>${t.statusText}</span>`,colorClass:s.TOAST_DANGER}),t.status==500&&s.show({title:"Ada Masalah Pada Server",body:`<span>${t.statusText}</span>`,colorClass:s.TOAST_DANGER})}finally{l.password.value="",i(a,!1)}});
